<!--
    ğŸ“–[login.html](https://github.com/pennersr/django-allauth/blob/master/allauth/templates/account/login.html)
-->

<!--
    # See also: ğŸ“–[Custom Signup View in django-allauth](https://tech.serhatteker.com/post/2020-06/custom-signup-view-in-django-allauth/)
-->
{% load static %} {% comment %} ğŸ‘ˆã‚ã¨ã§ static "URL" ã‚’ä½¿ã†ã®ã§ load static ã—ã¾ã™ {% endcomment %}
<!-- -->
{% load i18n %}
<!-- -->
{% load account socialaccount %}
<!-- -->
{% get_providers as socialaccount_providers %}
<!-- -->
<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8" />
        <link rel="shortcut icon" type="image/png" href="{% static 'favicon.ico' %}" />
        <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet" />
        <link href="https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css" rel="stylesheet" />
        <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>ã‚µã‚¤ãƒ³ã‚¤ãƒ³</title>
    </head>
    <body>
        <div id="app">
            <v-app>
                <!-- v-app-bar ã« app ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒ‡å®šã—ãªã„ãªã‚‰ã€èƒŒæ™¯ç”»åƒã‚’ä»˜ã‘ã¦ã»ã—ã„ -->
                <v-app-bar app dense elevation="4">
                    <v-app-bar-nav-icon></v-app-bar-nav-icon>
                    <v-toolbar-title>ã‚µã‚¤ãƒ³ã‚¤ãƒ³</v-toolbar-title>
                </v-app-bar>
                <v-main>
                    <v-container>
                        <h3>ã‚µã‚¤ãƒ³ã‚¤ãƒ³</h3>
                        {% if socialaccount_providers %}

                        <!-- ğŸ‘‡ã“ã“ã‚‰ã¸ã‚“åˆ†ã‹ã‚‰ãªã„ -->
                        <p>{% blocktrans with site.name as site_name %}Please sign in with one of your existing third party accounts. Or, <a href="{{ signup_url }}">sign up</a> for a {{ site_name }} account and sign in below:{% endblocktrans %}</p>
                        <div class="socialaccount_ballot">
                            <ul class="socialaccount_providers">
                                <!-- -->
                                {% include "socialaccount/snippets/provider_list.html" with process="login" %}
                                <!-- -->
                            </ul>

                            <div class="login-or">{% trans 'or' %}</div>
                        </div>
                        <!-- -->
                        {% include "socialaccount/snippets/login_extra.html" %}
                        <!-- ğŸ‘†ã“ã“ã‚‰ã¸ã‚“åˆ†ã‹ã‚‰ãªã„ -->

                        <!-- -->
                        {% else %}
                        <!-- ğŸ‘‡ã“ã£ã¡ãŒå‡ºã¦ãã‚‹ -->
                        <p>ã‚‚ã—ã‚ãªãŸãŒã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ã¾ã ä½œã£ã¦ã„ãªã„ãªã‚‰ã€ã¾ãš <v-btn class="my-4" color="primary" :href="createPathOfSignup()">ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—</v-btn> ã—ã¦ãã ã•ã„</p>
                        <!-- ğŸ‘†ã“ã£ã¡ãŒå‡ºã¦ãã‚‹ -->
                        {% endif %}
                        <!-- -->
                    </v-container>
                    <v-container>
                        <form class="login" method="POST" :action="createPathOfSignin()">
                            <!-- -->
                            {% csrf_token %}
                            <!-- æ‰‹å‹•ãƒ•ã‚©ãƒ¼ãƒ ä½œæˆ ã“ã“ã‹ã‚‰ -->
                            {{ form.non_field_errors }}
                            <div class="fieldWrapper">
                                {{ form.login.errors }}
                                <!-- -->
                                {% comment %} Vue ã§äºŒé‡æ³¢æ‹¬å¼§ï¼ˆbracesï¼‰ã¯å¤‰æ•°ã®å±•é–‹ã«ä½¿ã£ã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã€ Python ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«äºŒé‡æ³¢æ‹¬å¼§ã‚’å¤‰æ•°ã®å±•é–‹ã«ä½¿ã‚ãªã„ã‚ˆã† verbatim ã§æŒ‡ç¤ºã—ã¾ã™ã€‚ {% endcomment %}
                                <!-- -->
                                {% verbatim %}
                                <v-text-field name="login" v-model="vu_userName" :maxlength="vu_loginFormDoc.maxlength" counter label="ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåï¼š" required></v-text-field>
                                {% endverbatim %}
                            </div>
                            <div class="fieldWrapper">
                                {{ form.password.errors }}
                                <label for="{{ form.password.id_for_label }}">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼š</label>
                                {{ form.password }}
                            </div>
                            <div class="fieldWrapper">
                                {{ form.remember.errors }}
                                <label for="{{ form.remember.id_for_label }}">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ãŸã¾ã¾ã«ã™ã‚‹ï¼š</label>
                                {{ form.remember }}
                            </div>
                            <!-- æ‰‹å‹•ãƒ•ã‚©ãƒ¼ãƒ ä½œæˆ ã“ã“ã¾ã§ -->
                            <!-- -->
                            {% if redirect_field_value %}
                            <!-- -->
                            <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
                            <!-- -->
                            {% endif %}
                            <!-- -->
                            <a class="button secondaryAction" href="{% url 'account_reset_password' %}">{% trans "Forgot Password?" %}</a>
                            <v-btn class="my-4" color="primary" type="submit">ã‚µã‚¤ãƒ³ã‚¤ãƒ³</v-btn>
                        </form>
                    </v-container>
                </v-main>
            </v-app>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>

        <script src="{% static 'account/v1/django-form-parser.js' %}"></script>
        <!--                    ================================
                                1
            1. host1/webapp1/static/account/v1/django-form-parser.js
                                    ================================
        -->

        <script>
            let vue1 = new Vue({
                el: "#app",
                vuetify: new Vuetify(),
                data: {
                    // "vu_" ã¯ ã€Œvue1.dataã®ãƒ¡ãƒ³ãƒãƒ¼ã€ ã®ç›®å°

                    // URL ã¯ã€ãƒ¬ãƒƒã‚¹ãƒ³ã®é€²ã¿å…·åˆã«ã‚ˆã£ã¦é©å®œã€è²¼ã‚Šæ›¿ãˆã¦ãã ã•ã„
                    // vu_pathOfSignin: "{% url 'account_login' %}", // django-allauth ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
                    vu_pathOfSignin: "{% url 'account_v1_login' %}",

                    // vu_pathOfSignup: "{{ signup_url }}", // django-allauth ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
                    vu_pathOfSignup: "{% url 'account_v1_signup' %}",

                    // HTMLã‚¿ã‚°æ–‡å­—åˆ—ãŒæ¸¡ã•ã‚Œã‚‹ã®ã§ã€è§£æã—ã¾ã™
                    vu_loginFormDoc: new DjangoFormParser().parseHtmlString("login", "{{ form.login|escapejs }}"),
                    vu_userName: "",

                    vu_passwordFormDoc: new DjangoFormParser().parseHtmlString("password", "{{ form.password|escapejs }}"),
                    vu_password: "",

                    vu_rememberFormDoc: new DjangoFormParser().parseHtmlString("form", "{{ form.remember|escapejs }}"),
                    vu_rememberFlag: false,
                },
                methods: {
                    createPathOfSignin() {
                        let path = `${location.protocol}//${location.host}${this.vu_pathOfSignin}`;
                        //          --------------------  ---------------]-----------------------
                        //          1                     2               3
                        // 1. protocol
                        // 2. host
                        // 3. path
                        console.log(`SignIn path=[${path}]`);
                        return path;
                    },
                    createPathOfSignup() {
                        let path = `${location.protocol}//${location.host}${this.vu_pathOfSignup}`;
                        //          --------------------  ---------------]-----------------------
                        //          1                     2               3
                        // 1. protocol
                        // 2. host
                        // 3. path
                        console.log(`SignUp path=[${path}]`);
                        return path;
                    },
                },
            });
        </script>
    </body>
</html>
