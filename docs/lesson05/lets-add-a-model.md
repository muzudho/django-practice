---
title: Djangoã§ãƒ¢ãƒ‡ãƒ«ã‚’è¿½åŠ ã—ã‚ˆã†ï¼
tags: Django Docker
author: muzudho1
slide: false
---
# ç›®çš„

ã‚µãƒ¼ãƒãƒ¼ã«ãƒ‡ãƒ¼ã‚¿ã‚’è¨˜æ†¶ã—ãŸã„ã€‚  
ãƒ‡ãƒ¼ã‚¿ã®å½¢ã®ã‚ˆã†ãªã‚‚ã®ã‚’ **ãƒ¢ãƒ‡ãƒ«** ã¨å‘¼ã¶ã€‚ãƒ¢ãƒ‡ãƒ«ã‚’æ±ºã‚ã‚‹ã¨ã‚µãƒ¼ãƒãƒ¼ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚  
ãƒ¢ãƒ‡ãƒ«ã®æ±ºã‚æ–¹ã€ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ã®ä»•æ–¹ã‚’èª¬æ˜ã™ã‚‹ã€‚  

# ã¯ã˜ã‚ã«

ã“ã®é€£è¼‰ã®æœ€åˆã®ãƒšãƒ¼ã‚¸: ğŸ“– [Djangoã‚’Dockerã‚³ãƒ³ãƒ†ãƒŠã¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã‚ˆã†ï¼](https://qiita.com/muzudho1/items/eb0df0ea604e1fd9cdae)  

å‰æçŸ¥è­˜:  

| Key                              | Value                                                                                            |
| -------------------------------- | ------------------------------------------------------------------------------------------------ |
| ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œã£ã¦ãŠãã“ã¨ | ğŸ“–[Djangoã§ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è¿½åŠ ã—ã‚ˆã†ï¼](https://qiita.com/muzudho1/items/cf21fa75e23e1f987153) |

ã“ã®è¨˜äº‹ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£:  

| Key       | Value                                     |
| --------- | ----------------------------------------- |
| OS        | Windows10                                 |
| Container | Docker                                    |
| Editor    | Visual Studio Code ï¼ˆä»¥ä¸‹ VSCode ã¨è¡¨è¨˜ï¼‰ |

å‚è€ƒã«ã—ãŸå…ƒè¨˜äº‹ã¯ ğŸ“–[Djangoã§CRUD](https://qiita.com/zaburo/items/ab7f0eeeaec0e60d6b92) ã ã€‚  
ã‚ãŸã—ã®è¨˜äº‹ã¯å˜ã« **ã‚„ã£ã¦ã¿ãŸ** ãã‚‰ã„ã®ä½ç½®ã¥ã‘ã ã€‚  

å‰ã®è¨˜äº‹ã‹ã‚‰ç¶šã„ã¦ã„ã¦ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’æŠœç²‹ã™ã‚‹ã¨ ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚  

```plaintext
ğŸ“‚host1
ã€€â”œâ”€â”€ ğŸ“‚data
ã€€â”‚ã€€ã€€â””â”€â”€ ğŸ“‚db
ã€€â”‚ã€€ã€€ã€€ã€€â””â”€â”€ <ãŸãã•ã‚“ã®ã‚‚ã®>
ã€€â”œâ”€â”€ ğŸ“‚webapp1
ã€€â”‚ã€€ã€€â”œâ”€â”€ ğŸ“‚templates
ã€€â”‚ã€€ã€€â”‚    â””â”€â”€ ğŸ“‚webapp1
ã€€â”‚ã€€ã€€â”‚        â””â”€â”€ ğŸ“„<ã„ã‚ã„ã‚>.html
ã€€â”‚ã€€ã€€â”œâ”€â”€ ğŸ“„settings.py
ã€€â”‚ã€€ã€€â”œâ”€â”€ ğŸ“„urls.py
ã€€â”‚ã€€ã€€â”œâ”€â”€ ğŸ“„views.py
ã€€â”‚ã€€ã€€â””â”€â”€ <ã„ã‚ã„ã‚>
ã€€â”œâ”€â”€ ğŸ“„.env
ã€€â”œâ”€â”€ ğŸ³docker-compose.yml
ã€€â”œâ”€â”€ ğŸ³Dockerfile
ã€€â”œâ”€â”€ ğŸ“„manage.py
ã€€â””â”€â”€ <ã„ã‚ã„ã‚>
```

# Step 1. models.py ã‚’ä½œæˆ

ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã»ã—ã„

ğŸ“„`host1/webapp1/models.py`:  

```py
# See also: https://qiita.com/zaburo/items/ab7f0eeeaec0e60d6b92
from django.db import models

# ä»»æ„ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä»•æ§˜ã‚’æ±ºã‚ã‚‹æ„Ÿã˜ã§
class Member(models.Model):

    # ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ä»•æ§˜ã‚’æ±ºã‚ã‚‹æ„Ÿã˜ã§
    name = models.CharField('æ°å', max_length=255)
    email = models.CharField('E-Mail', max_length=255)
    age = models.IntegerField('å¹´é½¢', blank=True, default=0)

    # ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ–‡å­—åˆ—ã«ã—ãŸã¨ãè¿”ã‚‹ã‚‚ã®
    def __str__(self):
        return self.name
```

# Step 2. ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ

```shell
cd host1

docker-compose run --rm web python3 manage.py makemigrations webapp1
#                                                            -------
#                                                            1
# 1. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼å
```

ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã¨ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚  

```plaintext
ğŸ“‚host1
ã€€â””â”€â”€ ğŸ“‚webapp1
ã€€ ã€€ã€€â””â”€â”€ ğŸ“‚migrations
ã€€ ã€€ã€€     â”œâ”€â”€ ğŸ“„__init__.py
ã€€ ã€€ã€€     â””â”€â”€ ğŸ“„0001_initial.py
```

ğŸ‘† ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ãƒ•ã‚¡ã‚¤ãƒ« ã¨å‘¼ã¶ã‚‰ã—ã„ã€‚  

# Step 3. ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œï¼œãã®ï¼’ï¼

```shell
docker-compose run --rm web python manage.py migrate
```

ğŸ‘† ã“ã“ã¾ã§ã‚„ã£ã¦ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ã¨ã„ã†ä½œæ¥­ãŒçµ‚ã‚ã‚‹ã‚‰ã—ã„ã€‚  

# Step 4. admin.py ã‚’ä½œæˆ

ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã»ã—ã„

ğŸ“„`host1/webapp1/admin.py`:  

```py
# See also: https://qiita.com/zaburo/items/ab7f0eeeaec0e60d6b92
from django.contrib import admin
from .models import Member

# Register your models here.
admin.site.register(Member)
```

ğŸ‘† ç®¡ç†ç”»é¢ã« Member ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚  

# Step 5. ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§Webã®ç®¡ç†ç”»é¢ã¸ã‚¢ã‚¯ã‚»ã‚¹

```shell
# Dockerã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•
docker-compose up
```

ğŸ“– [http://localhost:8000/admin](http://localhost:8000/admin)  

ç”»é¢å·¦ã«

```plain
WEBAPP1
Members +Add
```

ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°OKã€‚  
ã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã€ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ç›´ã—ã¦ã»ã—ã„ã€‚  

# Step 6. Memberã‚’ï¼“ã¤ã»ã©è¿½åŠ ã—ã¦ã»ã—ã„

`Members +Add` ã®å³å´ã® `+Add` ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã»ã—ã„ã€‚  

```plaintext
æ°å: 
     ----------------

E-Mail: 
       ----------------

å¹´é½¢: 
     ----

                [Save and add another] [Save and continue editing] [SAVE]
```

ğŸ‘†å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ãŒå‡ºã¦ãã‚‹ã‹ã‚‰ã€ï¼“ä»¶ã»ã©é©å½“ã«è¿½åŠ ã—ã¦ã»ã—ã„ã€‚  
`[SAVE]` ãŒè¿½åŠ ãƒœã‚¿ãƒ³ã®ã‚ˆã†ã ã€‚  

# Step 7. ç™»éŒ²ã—ãŸ Member ã‚’ç¢ºèªã—ã¦ã»ã—ã„

`Members +Add` ã® `Members` ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ä¸€è¦§ç”»é¢ãŒå‡ºã¦ãã‚‹ã€‚  

# æ¬¡ã®è¨˜äº‹

ğŸ“– [Djangoã§ãƒ¢ãƒ‡ãƒ«ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä¸€è¦§è¡¨ç¤ºã‚’ã—ã‚ˆã†ï¼](https://qiita.com/muzudho1/items/77668130b6d941596327)  
